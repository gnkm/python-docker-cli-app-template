# 要件ドキュメント

## 概要

このドキュメントは、uvとDocker Composeを使用してPython CLIアプリケーション「my-app」を作成するための要件を定義します。このアプリケーションはコンテナ化され、ヘルプ機能と挨拶コマンドを持つシンプルなコマンドラインインターフェースを提供します。プロジェクトは参考資料で示されているuvを使用したDockerの開発ベストプラクティスに従います。

## 要件

### 要件 1

**ユーザーストーリー:** 開発者として、Docker Composeを使用してCLIアプリケーションを実行してヘルプ情報を表示したい。これにより、Pythonをローカルにインストールすることなく利用可能なコマンドを理解できる。

#### 受け入れ基準

1. `docker compose run my-app` を実行したとき、システムはCLIアプリケーションのヘルプ情報を表示する
2. ヘルプが表示されるとき、システムは利用可能なコマンドとその使用方法を表示する
3. ヘルプが表示されるとき、システムは終了コード0で終了する

### 要件 2

**ユーザーストーリー:** ユーザーとして、名前パラメータを持つhelloコマンドを実行したい。これにより、パーソナライズされた挨拶メッセージを受け取ることができる。

#### 受け入れ基準

1. `docker compose run my-app hello ${name}` を実行したとき、システムは「hello ${name}」を表示する（${name}は提供された引数）
2. helloコマンドに名前が提供されないとき、システムは適切なエラーメッセージを表示する
3. helloコマンドが正常に実行されるとき、システムは終了コード0で終了する

### 要件 3

**ユーザーストーリー:** 開発者として、アプリケーションが依存関係管理にuvを使用したい。これにより、高速なパッケージインストールと最新のPythonツールの恩恵を受けることができる。

#### 受け入れ基準

1. プロジェクトがビルドされるとき、システムは依存関係管理にuvを使用する
2. 依存関係がインストールされるとき、システムは再現可能なビルドのためにuv.lockを使用する
3. Dockerイメージがビルドされるとき、システムはキャッシュと最適化のためのuvのDockerベストプラクティスに従う

### 要件 4

**ユーザーストーリー:** 開発者として、アプリケーションがCLI機能にTyperを使用したい。これにより、最小限のコードで堅牢なコマンドラインインターフェースを作成できる。

#### 受け入れ基準

1. CLIが実装されるとき、システムはコマンドラインインターフェースにTyperライブラリを使用する
2. コマンドが定義されるとき、システムは自動的にヘルプテキストを生成する
3. 無効なコマンドが提供されるとき、システムは適切なエラーメッセージを表示する

### 要件 5

**ユーザーストーリー:** 開発者として、Dockerセットアップが開発ワークフローのベストプラクティスに従うことを望む。これにより、アプリケーションを効率的に開発・テストできる。

#### 受け入れ基準

1. Dockerfileが作成されるとき、システムは公式のuvのDockerイメージを使用する
2. Dockerイメージがビルドされるとき、システムは最適化のためにマルチステージビルドを実装する
3. 依存関係が変更されるとき、システムは高速な再ビルドのためにDockerレイヤーキャッシュを使用する
4. プロジェクトに.dockerignoreファイルが含まれるとき、システムはビルドから.venvディレクトリを除外する

### 要件 6

**ユーザーストーリー:** 開発者として、プロジェクト構造がクリーンで保守可能であることを望む。これにより、将来的にアプリケーションを簡単に拡張できる。

#### 受け入れ基準

1. プロジェクトが作成されるとき、システムはsrc/ディレクトリ構造でコードを整理する
2. プロジェクトが作成されるとき、システムは適切なpyproject.toml設定を含む
3. プロジェクトが作成されるとき、システムはpyproject.tomlでCLIエントリーポイントを定義する
4. プロジェクトが作成されるとき、システムは適切な開発依存関係を含む